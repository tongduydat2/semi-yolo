# Iterative Semi-Training Configuration
# ======================================

# Output directory
output_dir: "runs/iterative_semi"

# Model settings
model:
  weights: "yolo11n.pt"  # Or path to pretrained weights

# Image settings
imgsz: 640
batch_size: 16

# Training parameters
max_iterations: 10
epochs_per_iter: 10

# Data paths
unlabeled_images: "datasets/unlabeled"
val_images: "datasets/val/images"

# Synthetic generation
synthetic:
  initial_ratio: 0.8       # Start with 80% synthetic
  min_ratio: 0.2           # Never go below 20%
  decay_rate: 0.15         # Decay by 15% each iteration
  num_images_per_iter: 1000

# Synthetic generator settings (for PVF-10)
synthetic_generator:
  config: "../pseudo_dataset_PV/config.yaml"
  obb_weights: "../models/obb_best.pt"

# Class names
class_names:
  0: "Hot-Spot"
  1: "Broken-Cell"
  2: "Shadow"
  3: "Junction-Box-Heat"
  4: "Debris-Cover"
  5: "Substring-Open-Circuit"

# Class distribution for synthetic generation
class_distribution:
  Hot-Spot: 200
  Broken-Cell: 200
  Shadow: 200
  Junction-Box-Heat: 200
  Debris-Cover: 200
  Substring-Open-Circuit: 200

# Consistency filter settings
consistency:
  n_augmentations: 4       # Number of augmented predictions
  min_consistency: 0.67    # 2/3 must agree
  iou_threshold: 0.5       # IoU for matching boxes

# Distribution collapse detection
collapse:
  min_detection_rate: 0.05  # Min acceptable rate
  threshold: 0.5            # Alert if drops by 50%

# Pseudo-label confidence threshold
pseudo_label_threshold: 0.75

# Cleanup after each iteration
cleanup: true
