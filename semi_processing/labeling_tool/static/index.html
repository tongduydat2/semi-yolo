<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOLO Labeling Tool</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- Sidebar: Image Gallery (Left) -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>üè∑Ô∏è YOLO Labeler</h2>
            <div class="stats" id="stats">Loading...</div>
        </div>
        
        <div class="image-gallery" id="imageGallery">
            <!-- Images will be loaded here -->
        </div>
    </aside>

    <!-- Main Content (Center) -->
    <main class="main-content">
        <!-- Toolbar -->
        <div class="toolbar">
            <div class="toolbar-actions">
                <button class="btn btn-save" id="btnSave" title="L∆∞u (E)">
                    üíæ L∆∞u
                </button>
                <button class="btn btn-undo" id="btnUndo" title="Ho√†n t√°c (Ctrl+Z)">
                    ‚Ü©Ô∏è Undo
                </button>
                <button class="btn btn-clear" id="btnClear" title="X√≥a t·∫•t c·∫£">
                    üóëÔ∏è X√≥a
                </button>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-nav" id="btnPrev" title="·∫¢nh tr∆∞·ªõc (A)">‚óÄ Tr∆∞·ªõc</button>
                <span class="image-counter" id="imageCounter">0/0</span>
                <button class="btn btn-nav" id="btnNext" title="·∫¢nh sau (D)">Sau ‚ñ∂</button>
            </div>
        </div>

        <!-- Canvas Container -->
        <div class="canvas-container" id="canvasContainer">
            <!-- Crosshair lines (shown in draw mode) -->
            <div class="crosshair-line-vertical" id="crosshairV"></div>
            <div class="crosshair-line-horizontal" id="crosshairH"></div>
            
            <canvas id="annotationCanvas"></canvas>
            <div class="no-image" id="noImage">
                <p>üì∑ Ch·ªçn ·∫£nh t·ª´ sidebar ƒë·ªÉ b·∫Øt ƒë·∫ßu g√°n nh√£n</p>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <span id="currentFile">Ch∆∞a ch·ªçn ·∫£nh</span>
            <span id="boxCount">0 box</span>
            <span id="coords">x: 0, y: 0</span>
        </div>
    </main>

    <!-- Right Sidebar: Class Labels -->
    <aside class="right-sidebar" id="rightSidebar">
        <div class="sidebar-header">
            <h3>üìã Nh√£n</h3>
        </div>
        
        <div class="class-list" id="classList">
            <!-- Class buttons will be loaded here -->
        </div>
        
        <div class="mode-toggles">
            <label class="toggle-item">
                <input type="checkbox" id="toggleDraw" checked>
                <span>‚úèÔ∏è Ch·∫ø ƒë·ªô v·∫Ω (Q)</span>
            </label>
            <label class="toggle-item">
                <input type="checkbox" id="toggleSingleLabel">
                <span>1Ô∏è‚É£ Nh√£n ƒë∆°n (K)</span>
            </label>
            <label class="toggle-item">
                <input type="checkbox" id="toggleAutoSave" checked>
                <span>üíæ T·ª± l∆∞u (L)</span>
            </label>
        </div>
    </aside>

    <!-- Label Selection Popup (shown after drawing bbox) -->
    <div class="label-popup" id="labelPopup">
        <div class="label-popup-content">
            <div class="label-popup-header">
                <span>Ch·ªçn nh√£n:</span>
                <button class="popup-close" id="popupClose">‚úï</button>
            </div>
            <div class="label-popup-list" id="labelPopupList">
                <!-- Labels will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Edit Box Popup (shown when pressing F on selected box) -->
    <div class="label-popup" id="editPopup">
        <div class="label-popup-content">
            <div class="label-popup-header">
                <span>S·ª≠a nh√£n:</span>
                <button class="popup-close" id="editPopupClose">‚úï</button>
            </div>
            <div class="label-popup-list" id="editPopupList">
                <!-- Labels will be loaded here -->
            </div>
            <div class="popup-actions">
                <button class="btn btn-redraw" id="btnRedraw">‚úèÔ∏è V·∫Ω l·∫°i bbox</button>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <h3>‚å®Ô∏è Ph√≠m t·∫Øt</h3>
            <table>
                <tr><th>Ph√≠m</th><th>Ch·ª©c nƒÉng</th></tr>
                <tr><td><kbd>1</kbd>-<kbd>9</kbd></td><td>Ch·ªçn nh√£n 1-9</td></tr>
                <tr><td><kbd>Q</kbd></td><td>B·∫≠t/T·∫Øt ch·∫ø ƒë·ªô v·∫Ω</td></tr>
                <tr><td><kbd>E</kbd></td><td>L∆∞u nh√£n</td></tr>
                <tr><td><kbd>A</kbd> / <kbd>‚Üë</kbd></td><td>·∫¢nh tr∆∞·ªõc</td></tr>
                <tr><td><kbd>D</kbd> / <kbd>‚Üì</kbd></td><td>·∫¢nh sau</td></tr>
                <tr><td><kbd>R</kbd> / <kbd>Del</kbd></td><td>X√≥a box ƒëang ch·ªçn</td></tr>
                <tr><td><kbd>F</kbd></td><td>ƒê·ªïi nh√£n box (cycle)</td></tr>
                <tr><td><kbd>K</kbd></td><td>B·∫≠t/T·∫Øt nh√£n ƒë∆°n</td></tr>
                <tr><td><kbd>L</kbd></td><td>B·∫≠t/T·∫Øt t·ª± l∆∞u</td></tr>
                <tr><td><kbd>Z</kbd></td><td>X√°c nh·∫≠n ·∫£nh</td></tr>
                <tr><td><kbd>X</kbd></td><td>H·ªßy x√°c nh·∫≠n</td></tr>
                <tr><td><kbd>Ctrl+Z</kbd></td><td>Ho√†n t√°c</td></tr>
                <tr><td><kbd>Scroll</kbd></td><td>Zoom in/out</td></tr>
                <tr><td><kbd>?</kbd></td><td>Hi·ªán/·∫®n b·∫£ng n√†y</td></tr>
            </table>
            <button class="btn" onclick="document.getElementById('helpModal').classList.remove('show')">ƒê√≥ng</button>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
